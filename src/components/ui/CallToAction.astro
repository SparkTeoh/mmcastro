---
// CallToAction component for MMC Astro
// Based on CallToAction section component

import Button from "./Button.astro";

interface Props {
  title?: string;
  subtitle?: string;
  description?: string;
  buttonText?: string;
  buttonHref?: string;
  imageSrc?: string;
  imageAlt?: string;
  badgeText?: string;
  badgeSubtext?: string;
  className?: string;
}

const { 
  title = "明年赚多少，算了才知道。",
  subtitle = "你准备好实现利润增长了吗？",
  description = "别再凭感觉设定目标。与我们的预算专家进行一次一对一的战略沟通，我们将帮您理清思路，用一套科学的预算工具，规划出明年收入与利润双增长的清晰路径。",
  buttonText = "点击预约60分钟战略通话",
  buttonHref = "/contact/",
  imageSrc = "/images/call-to-action/sparkliang.webp",
  imageAlt = "专家顾问",
  badgeText = "利润+",
  badgeSubtext = "不用靠猜的",
  className = ""
} = Astro.props;
---

<section class={`mt-auto overflow-hidden ${className}`}>
  <div class="bg-theme-light relative pt-6 md:pt-8 pb-0">
    <!-- Background shapes -->
    <div class="pointer-events-none absolute top-0 right-0 z-10 h-40 w-28 opacity-30 md:opacity-100 lg:left-0">
      <img
        class="match-brand-color text-primary h-full w-full origin-bottom-right object-cover"
        src="/images/shapes/cta-shape-one.svg"
        alt="pattern"
      />
    </div>
    <div class="pointer-events-none absolute right-0 bottom-0 z-10 h-40 w-44 opacity-30 max-lg:hidden md:opacity-100">
      <img
        class="match-brand-color text-primary h-full w-full origin-bottom-right object-cover"
        src="/images/shapes/cta-shape-two.svg"
        alt="pattern"
      />
    </div>
    
    <div class="container grid gap-x-10 gap-y-6 md:gap-y-8 lg:grid-cols-2 lg:place-items-center">
      <!-- Left content -->
      <div class="lg:max-w-2xl pt-6 md:pt-8 lg:pt-0">
        <div data-aos="fade-up-sm" data-aos-offset="0">
          <span class="bg-primary/5 border-secondary text-primary mb-2.5 inline-block rounded-full border px-5 py-px">
            {subtitle}
          </span>
          <h2 class="text-h3 text-inherit">
            {title}
          </h2>
        </div>
        <div
          data-aos="fade-up-sm"
          data-aos-offset="0"
          data-aos-delay="200"
          class="mt-6"
        >
          <p>
            {description}
          </p>
        </div>
        <div
          data-aos="fade-up-sm"
          data-aos-offset="0"
          data-aos-delay="300"
        >
          <Button 
            href={buttonHref}
            variant="outline"
            size="lg"
            className="relative mt-8 flex items-center has-text-flip-animation"
          >
            {buttonText}
            <span class="icon ml-2">
              <svg class="h-4 w-4 text-white" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"></path>
              </svg>
            </span>
          </Button>
        </div>
      </div>
      
      <!-- Right content - Image -->
      <div class="has-animated-number relative lg:pt-8 pb-0">
        <div class="relative z-10 mx-auto w-fit" data-aos="fade-up-sm">
          <img
            class="max-w-full md:max-w-lg"
            src={imageSrc}
            alt={imageAlt}
          />
          <!-- Experience badge -->
          <div class="bg-primary absolute bottom-16 left-5 md:-left-20">
            <div class="py-2 ps-5 text-white">
              <div class="relative flex items-stretch">
                <div class="text-h2 leading-tight font-bold text-inherit md:text-6xl">
                  {badgeText}<small><small>+</small></small>
                </div>
                <sup class="font-secondary top-0 -left-6 text-sm font-bold tracking-wider text-inherit">
                  {badgeSubtext}
                </sup>
              </div>
              <img
                class="pointer-events-none absolute inset-0 h-full w-full"
                src="/images/call-to-action/stats-block-bg.svg"
                alt="background pattern"
              />
            </div>
          </div>
        </div>
        <!-- Background shape -->
        <div class="bg-primary pointer-events-none absolute top-[calc(50%_-_42px)] left-1/2 h-[35.875rem] w-[35.875rem] -translate-x-1/2 rounded-full opacity-80" />
      </div>
    </div>
  </div>
</section>

<style>
  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
  }
  
  @media (min-width: 768px) {
    .container {
      padding: 0 2rem;
    }
  }
  
  @media (min-width: 1024px) {
    .container {
      padding: 0 3rem;
    }
  }
  
  .bg-theme-light {
    background-color: #f8fafc;
  }
  
  .text-h3 {
    font-size: 2rem;
    line-height: 2.5rem;
    font-weight: 700;
  }
  
  @media (min-width: 768px) {
    .text-h3 {
      font-size: 2.5rem;
      line-height: 3rem;
    }
  }
  
  .text-h2 {
    font-size: 1.5rem;
    line-height: 2rem;
    font-weight: 700;
  }
  
  @media (min-width: 768px) {
    .text-h2 {
      font-size: 2rem;
      line-height: 2.5rem;
    }
  }
  
  .border-secondary {
    border-color: #B4A180;
  }
  
  .font-secondary {
    font-family: "Syne", sans-serif;
  }
</style>
