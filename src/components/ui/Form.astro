---
// Form component for MMC Astro
// Based on SparkAstro's Form component but adapted for MMC's needs
---

<div class="flex relative justify-start items-center p-8 bg-white rounded-lg overflow-hidden border border-gray-200">
  <form class="bg-white sm:p-6 h-full w-full lg:max-w-lg">
    <div class="flex flex-col sm:flex-row gap-6 sm:items-center mb-8">
      <div class="flex items-center gap-4">
        <input
          type="checkbox"
          id="checkbox1"
          name="checkbox1"
          class="form-checkbox text-primary"
        />
        <label for="checkbox1" class="text-primary">咨询合作</label>
      </div>
      <div class="flex items-center gap-4">
        <input
          type="checkbox"
          id="checkbox2"
          name="checkbox2"
          class="form-checkbox text-primary"
        />
        <label for="checkbox2" class="flex items-center text-primary">
          获取报价
        </label>
      </div>
    </div>

    <div class="mb-4">
      <label for="name" class="block text-primary mb-2">姓名 *</label>
      <input
        type="text"
        id="name"
        name="name"
        placeholder="请输入您的姓名"
        class="w-full px-4 py-3 border border-primary rounded-lg text-primary outline-none focus:border-accent focus:ring-2 focus:ring-accent focus:ring-opacity-20"
      />
    </div>

    <div class="mb-4">
      <label for="email" class="block text-primary mb-2">邮箱 *</label>
      <input
        type="email"
        id="email"
        name="email"
        placeholder="请输入您的邮箱"
        class="w-full px-4 py-3 border border-primary rounded-lg text-primary outline-none focus:border-accent focus:ring-2 focus:ring-accent focus:ring-opacity-20"
      />
    </div>

    <div class="mb-4">
      <label for="phone" class="block text-primary mb-2">电话</label>
      <input
        type="tel"
        id="phone"
        name="phone"
        placeholder="请输入您的电话"
        class="w-full px-4 py-3 border border-primary rounded-lg text-primary outline-none focus:border-accent focus:ring-2 focus:ring-accent focus:ring-opacity-20"
      />
    </div>

    <div class="mb-6">
      <label for="message" class="block text-primary mb-2">留言 *</label>
      <textarea
        id="message"
        name="message"
        placeholder="请描述您的需求..."
        rows="4"
        class="w-full px-4 py-3 border border-primary rounded-lg text-primary outline-none focus:border-accent focus:ring-2 focus:ring-accent focus:ring-opacity-20 resize-vertical"
      ></textarea>
    </div>

    <button 
      type="submit" 
      name="submit" 
      class="w-full px-8 py-4 bg-primary hover:bg-accent text-white font-bold rounded-lg transition-all duration-300 hover:shadow-lg transform hover:scale-105"
    >
      提交咨询
    </button>
  </form>
</div>

<style>
  .form-checkbox {
    appearance: none;
    width: 20px;
    height: 20px;
    border: 2px solid var(--primary);
    border-radius: 4px;
    outline: none;
    cursor: pointer;
    position: relative;
    transition: all 0.2s ease;
  }

  .form-checkbox:hover {
    border-color: var(--accent);
  }

  .form-checkbox:checked {
    background-color: var(--primary);
    border-color: var(--primary);
  }

  .form-checkbox:checked::after {
    content: "✓";
    display: block;
    color: white;
    font-size: 12px;
    font-weight: bold;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }
</style>

<script>
  function formSetup() {
    const cb1 = document.getElementById("checkbox1") as HTMLInputElement;
    const cb2 = document.getElementById("checkbox2") as HTMLInputElement;
    const message = document.getElementById("message") as HTMLTextAreaElement;

    if (cb1 && cb2) {
      cb1.checked = true;

      cb2.addEventListener("change", function () {
        if (cb2.checked) {
          cb1.checked = false;
          if (message) {
            message.value = "我们想了解您的服务，请与我们联系";
          }
        } else {
          if (message) {
            message.value = "";
          }
          cb1.checked = true;
        }
      });
      
      cb1.addEventListener("change", function () {
        if (cb1.checked) {
          cb2.checked = false;
          if (message) {
            message.value = "";
          }
        } else {
          cb2.checked = true;
          if (message) {
            message.value = "我们想了解您的服务，请与我们联系";
          }
        }
      });
    }
  }

  formSetup();
  document.addEventListener("astro:after-swap", formSetup);
</script>
